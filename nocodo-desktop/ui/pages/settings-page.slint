import { VerticalBox, HorizontalBox } from "std-widgets.slint";
import { DesktopSizes, DesktopColors, DesktopTypography } from "../theme.slint";
import { ApiKeyEntry } from "../types.slint";

export component SettingsPage inherits Rectangle {
    in-out property <[ApiKeyEntry]> api-keys;

    background: DesktopColors.background;
    horizontal-stretch: 1;
    min-width: 0;

    VerticalLayout {
        width: 100%;
        padding: DesktopSizes.space_lg;
        spacing: DesktopSizes.space_md;

        Text {
            text: "Settings";
            font-size: DesktopTypography.font_2xl;
            font-weight: DesktopTypography.weight_semibold;
            color: DesktopColors.text_primary;
        }

        Text {
            text: "API Keys";
            font-size: DesktopTypography.font_lg;
            font-weight: DesktopTypography.weight_medium;
            color: DesktopColors.text_primary;
        }

        for entry in api-keys: HorizontalLayout {
            alignment: start;

            Rectangle {
                width: DesktopSizes.input_default_width;
                height: DesktopSizes.card_item_height;
                background: DesktopColors.surface;
                border-radius: DesktopSizes.radius_sm;
                border-width: DesktopSizes.border_thin;
                border-color: DesktopColors.border_medium;

                VerticalBox {
                    padding: DesktopSizes.padding_input;
                    spacing: DesktopSizes.space_sm;

                    Text {
                        text: entry.name;
                        font-weight: DesktopTypography.weight_bold;
                        color: DesktopColors.text_primary;
                        font-size: DesktopTypography.font_base;
                    }

                    Rectangle {
                        height: DesktopSizes.input_height - 8px;
                        background: DesktopColors.background;
                        border-radius: DesktopSizes.radius_sm;
                        border-width: DesktopSizes.border_thin;
                        border-color: DesktopColors.border_medium;
                        clip: true;

                        Text {
                            x: DesktopSizes.space_sm;
                            width: parent.width - 2 * DesktopSizes.space_sm;
                            text: entry.key;
                            color: DesktopColors.text_secondary;
                            vertical-alignment: center;
                            font-size: DesktopTypography.font_base;
                            overflow: TextOverflow.elide;
                        }
                    }
                }
            }
        }
    }
}
